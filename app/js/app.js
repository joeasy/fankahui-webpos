/*!
 * 
 * Angle - Bootstrap Admin App + AngularJS
 * 
 * Version: 3.1.0
 * Author: @themicon_co
 * Website: http://themicon.co
 * License: https://wrapbootstrap.com/help/licenses
 * 
 */
!function(){"use strict";angular.module("angle",["app.core","app.routes","app.sidebar","app.preloader","app.loadingbar","app.translate","app.settings","app.dashboard","app.notify","app.elements","app.panels","app.charts","app.forms","app.locale","app.pages","app.tables","app.utils","app.items","app.myshop","app.sales","app.members","app.costs"])}(),function(){"use strict";angular.module("app.colors",[])}(),function(){"use strict";angular.module("app.charts",[])}(),function(){"use strict";angular.module("app.core",["ngRoute","ngAnimate","ngStorage","ngCookies","pascalprecht.translate","ui.bootstrap","ui.router","oc.lazyLoad","cfp.loadingBar","ngSanitize","ngResource","tmh.dynamicLocale","ui.utils","lbServices"])}(),function(){"use strict";angular.module("app.costs",[])}(),function(){"use strict";angular.module("app.dashboard",[])}(),function(){"use strict";angular.module("app.elements",[])}(),function(){"use strict";angular.module("app.forms",[])}(),function(){"use strict";angular.module("app.items",[])}(),function(){"use strict";angular.module("app.lazyload",[])}(),function(){"use strict";angular.module("app.loadingbar",[])}(),function(){"use strict";angular.module("app.locale",[])}(),function(){"use strict";angular.module("app.members",[])}(),function(){"use strict";angular.module("app.myshop",[])}(),function(){"use strict";angular.module("app.notify",[])}(),function(){"use strict";angular.module("app.pages",[])}(),function(){"use strict";angular.module("app.panels",[])}(),function(){"use strict";angular.module("app.preloader",[])}(),function(){"use strict";angular.module("app.sales",[])}(),function(){"use strict";angular.module("app.routes",["app.lazyload"])}(),function(){"use strict";angular.module("app.settings",[])}(),function(){"use strict";angular.module("app.sidebar",[])}(),function(){"use strict";angular.module("app.tables",[])}(),function(){"use strict";angular.module("app.translate",[])}(),function(){"use strict";angular.module("app.utils",["app.colors"])}(),function(){"use strict";angular.module("app.colors").constant("APP_COLORS",{primary:"#5d9cec",success:"#27c24c",info:"#23b7e5",warning:"#ff902b",danger:"#f05050",inverse:"#131e26",green:"#37bc9b",pink:"#f532e5",purple:"#7266ba",dark:"#3a3f51",yellow:"#fad732","gray-darker":"#232735","gray-dark":"#3a3f51",gray:"#dde6e9","gray-light":"#e4eaec","gray-lighter":"#edf1f2"})}(),function(){"use strict";function e(e){function t(t){return e[t]||"#fff"}this.byName=t}angular.module("app.colors").service("Colors",e),e.$inject=["APP_COLORS"]}(),function(){"use strict";function e(e){return function(){return{restrict:"A",scope:{data:"=",options:"=",id:"@",width:"=",height:"=",resize:"=",chart:"@",segments:"@",responsive:"=",tooltip:"=",legend:"="},link:function(t,n){var o=n[0].getContext("2d"),r=!1;t.size=function(){t.width<=0?(n.width(n.parent().width()),o.canvas.width=n.width()):(o.canvas.width=t.width||o.canvas.width,r=!0),t.height<=0?(n.height(n.parent().height()),o.canvas.height=o.canvas.width/2):(o.canvas.height=t.height||o.canvas.height,r=!0)},t.$watch("data",function(s){a&&a.destroy(),s&&(t.chart&&(e=t.chart),r&&(t.size(),i=new Chart(o)),(t.responsive||t.resize)&&(t.options.responsive=!0),void 0!==t.responsive&&(t.options.responsive=t.responsive),a=i[e](t.data,t.options),a.update(),t.legend&&angular.element(n[0]).parent().after(a.generateLegend()))},!0),t.$watch("tooltip",function(e){if(a&&a.draw(),void 0!==e&&a.segments&&!(!isFinite(e)||e>=a.segments.length||0>e)){var t=a.segments[e];t.save(),t.fillColor=t.highlightColor,a.showTooltip([t]),t.restore()}},!0),t.size();var a,i=new Chart(o)}}}}angular.module("app.charts").directive("linechart",e("Line")).directive("barchart",e("Bar")).directive("radarchart",e("Radar")).directive("polarchart",e("PolarArea")).directive("piechart",e("Pie")).directive("doughnutchart",e("Doughnut")).directive("donutchart",e("Doughnut"))}(),function(){"use strict";function e(e,t,n){function o(o,r){function a(e,n){var o=-20;!e.hasClass(l)&&t.isInView(e,{topoffset:o})&&i(e,n)}function i(e,t){e.ClassyLoader(t).addClass(l)}var s=$(n),l="js-is-in-view";e(function(){var e=$(r),t=e.data();t&&(t.triggerInView?(s.scroll(function(){a(e,t)}),a(e,t)):i(e,t))},0)}var r={link:o,restrict:"A"};return r}angular.module("app.charts").directive("classyloader",e),e.$inject=["$timeout","Utils","$window"]}(),function(){"use strict";function e(e){function t(t){return e(t,{},n).get()}this.load=t;var n={get:{method:"GET",isArray:!0}}}angular.module("app.charts").service("ChartData",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e,t){function n(n,o,r){function a(){var e;if(n.dataset&&n.options)return e=$.plot(d,n.dataset,n.options),n.$emit("plotReady",e),n.callback&&n.callback(e,n),e}function i(e){return u?(u.setData(e),u.setupGrid(),u.draw()):(u=a(),s(n.series),u)}function s(e){function t(e){return function(t,o){n[o]&&n[o][e]&&(n[o][e].show=t)}}if(u&&e){var n=u.getData();for(var o in e)angular.forEach(e[o],t(o));u.setData(n),u.draw()}}function l(o){o&&e.get(o).success(function(e){t(function(){n.dataset=e})}).error(function(){$.error("Flot chart: Bad request.")})}var c,u,d,p,m=220;u=null,p=r.width||"100%",c=r.height||m,d=$(o.children()[0]),d.css({width:p,height:c}),n.$watchCollection("dataset",i,!0),n.$watch("series",s,!0),n.$watch("src",l)}var o={restrict:"EA",template:"<div></div>",scope:{dataset:"=?",options:"=",series:"=",callback:"=",src:"="},link:n};return o}angular.module("app.charts").directive("flot",e),e.$inject=["$http","$timeout"]}(),function(){"use strict";function e(e){return function(){return{restrict:"EA",scope:{morrisData:"=",morrisOptions:"="},link:function(t,n){t.$watch("morrisData",function(e){e&&(t.morrisInstance.setData(e),t.morrisInstance.redraw())},!0),t.morrisOptions.element=n,t.morrisData&&(t.morrisOptions.data=t.morrisData),t.morrisInstance=new Morris[e](t.morrisOptions)}}}}angular.module("app.charts").directive("morrisBar",e("Bar")).directive("morrisDonut",e("Donut")).directive("morrisLine",e("Line")).directive("morrisArea",e("Area"))}(),function(){"use strict";function e(){var e={restrict:"EA",scope:{sparkline:"="},controller:t};return e}function t(e,t,n,o){function r(){var n=e.sparkline,r=t.data();n?r&&(n=angular.extend({},n,r)):n=r,n.type=n.type||"bar",n.disableHiddenCheck=!0,t.sparkline("html",n),n.resize&&$(o).resize(function(){t.sparkline("html",n)})}var a=function(){r()};n(a)}angular.module("app.charts").directive("sparkline",e),t.$inject=["$scope","$element","$timeout","$window"]}(),function(){"use strict";function e(e,t,n,o,r){var a=angular.module("app.core");a.controller=e.register,a.directive=t.directive,a.filter=n.register,a.factory=o.factory,a.service=o.service,a.constant=o.constant,a.value=o.value,r.interceptors.push(["$q","$location","LoopBackAuth",function(e,t,n){return{responseError:function(o){return 401==o.status&&(n.clearUser(),n.clearStorage(),t.path("/page/login")),e.reject(o)}}}])}function t(e,t){e.setUrlBase(t)}angular.module("app.core").config(e).config(t),e.$inject=["$controllerProvider","$compileProvider","$filterProvider","$provide","$httpProvider"],t.$inject=["LoopBackResourceProvider","urlBase"]}(),function(){"use strict";angular.module("app.core").constant("APP_MEDIAQUERY",{desktopLG:1200,desktop:992,tablet:768,mobile:480}).constant("urlBase","http://0.0.0.0:3000/api")}(),function(){"use strict";function e(){var e={owner:"老板",shopManager:"店长",cashier:"收银员"};return function(t){return e[t]}}angular.module("app.core").filter("role",e)}(),function(){"use strict";function e(e,t,n,o,r,a){e.$state=t,e.$stateParams=n,e.$storage=o.localStorage,e.colorByName=a.byName,e.cancel=function(e){e.stopPropagation()},e.$on("$stateNotFound",function(e,t){console.log(t.to),console.log(t.toParams),console.log(t.options)}),e.$on("$stateChangeError",function(e,t,n,o,r,a){console.log(a)}),e.$on("$stateChangeSuccess",function(){o.scrollTo(0,0),e.currTitle=t.current.title}),e.currTitle=t.current.title,e.pageTitle=function(){var t=e.app.name+" - "+(e.currTitle||e.app.description);return document.title=t,t}}function t(e,t,n){function o(){t.isAuthenticated()&&t.findById({id:t.getCurrentId(),filter:{include:["shop","merchant"]}}).$promise.then(function(t){t.job=n("role")(t.role),t.name=t.name||t.username,t.picture="app/img/dummy.png",e.user=t})}o(),e.$on("User.logined",o)}angular.module("app.core").run(e).run(t),e.$inject=["$rootScope","$state","$stateParams","$window","$templateCache","Colors"],t.$inject=["$rootScope","User","$filter"]}(),function(){"use strict";function e(e,t,n,o,r,a){function i(){s.tableParams=new n({count:10},{getData:function(e,n){var r={where:{status:{ne:"deleted"},modified:{between:[moment(s.dt.begin.dt).startOf("day"),moment(s.dt.end.dt).endOf("day")]}}};o.getData(e,n,t,r)}})}var s=this;i(),s.dt={options:{formatYear:"yy",maxDate:new Date,minDate:new Date(2016,1,1),startingDay:1},begin:{dt:new Date(moment().startOf("month")),open:!1},end:{dt:new Date,open:!1}},s.create=function(){a.open({template:"costDialogId",controller:"costDialogController"}).closePromise.then(function(e){s.tableParams.reload()})},s.edit=function(t){e.data=t,a.open({template:"costDialogId",controller:"costDialogController",scope:e}).closePromise.then(function(e){s.tableParams.reload()})},s["delete"]=function(e){r.swal({title:"确认删除？",text:"删除以后将恢复！",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"是的，删除！",cancelButtonText:"不，先不删!"},function(n){n&&(t.deleteById({id:e.id}),s.tableParams.reload())})}}function t(e,t,n){function o(){a.categories=t.find({filter:{order:"name DESC",where:{status:{ne:"deleted"}}}})}function r(e){n.swal({title:"确认删除？",text:"删除以后将无法使用分类了！",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"是的，删除！",cancelButtonText:"不，先不删!"},e)}var a=this;o(),a.reload=o(),a.addCategory=function(e){e&&""!=e&&t.create({name:e}).$promise.then(o)},a.updateCategory=function(e){t.prototype$updateAttributes({id:e.id},{status:e.status,name:e.name,subs:e.subs}).$promise.then(o)},a.deleteCategory=function(e){r(function(t){t&&(e.status="deleted",a.updateCategory(e))})},a.addSubCategory=function(e,t){t&&""!=t&&-1===e.subs.indexOf(t)&&(e.subs.push(t),a.updateCategory(e))},a.deleteSubcategory=function(e,t){r(function(n){n&&(e.subs.splice(t,1),a.updateCategory(e))})}}function n(e,t,n,o,r,a){function i(){e.categories=r.find({filter:{order:"name DESC",where:{status:{ne:"deleted"}}}}),e.data=e.data||{category:"请选择",subcategory:"分类",amount:0}}i(),e.setCategory=function(t,n){e.data.category=t,e.data.subcategory=n,e.isCollapsed=!0},e.confirm=function(){0!==e.data.amount&&(delete e.data.merchantId,delete e.data.shopId,delete e.data.created,delete e.data.operator,n.upsert(e.data).$promise.then(function(n){e.submiting=!1,t.close(),a.pop("success","成功","完成支出登记")},function(t){e.submiting=!1,a.pop("error","失败","支出登记未完成，请重试！")}),e.submiting=!0)}}angular.module("app.costs").controller("CostsController",e).controller("CostCategoriesController",t).controller("costDialogController",n),e.$inject=["$scope","Cost","ngTableParams","ngTableLBService","SweetAlert","ngDialog"],t.$inject=["$scope","Costcategory","SweetAlert"],n.$inject=["$scope","ngDialog","Cost","SweetAlert","Costcategory","toaster"]}(),function(){"use strict";function e(e,t,n,o,r,a){function i(){e.user&&(s.statData={amount:0,qty:0,deposit:0},r.stat({filter:{where:{status:"closed","payment.amount":{$gt:0}}}},function(e){0!==e.length&&(s.statData.amount=e[0].amount,s.statData.qty=e[0].qty)}),a.stat({filter:{where:{status:"closed",category:"deposit"}}},function(e){0!==e.length&&(s.statData.deposit=e[0].amount)}),s.checkins=o.find({filter:{where:{merchantId:e.user.shopId},include:[{member:"wxuser"}],limit:10,order:"created DESC"}}),s.splineData=t.load("server/chart/spline.json"),s.splineOptions={series:{lines:{show:!1},points:{show:!0,radius:4},splines:{show:!0,tension:.4,lineWidth:1,fill:.5}},grid:{borderColor:"#eee",borderWidth:1,hoverable:!0,backgroundColor:"#fcfcfc"},tooltip:!0,tooltipOpts:{content:function(e,t,n){return t+" : "+n}},xaxis:{tickColor:"#fcfcfc",mode:"categories"},yaxis:{min:0,max:150,tickColor:"#eee",position:e.app.layout.isRTL?"right":"left",tickFormatter:function(e){return e}},shadowSize:0},e.$on("panel-refresh",function(t,o){console.log("Simulating chart refresh during 3s on #"+o),n(function(){e.$broadcast("removeSpinner",o),console.log("Refreshed #"+o)},3e3)}),e.$on("panel-remove",function(e,t,n){console.log("Panel #"+t+" removing"),n.resolve()}),e.$on("panel-removed",function(e,t){console.log("Panel #"+t+" removed")}))}var s=this;moment.locale("zh-cn"),i(),e.$on("User.logined",i)}angular.module("app.dashboard").controller("DashboardController",e),e.$inject=["$scope","ChartData","$timeout","Checkin","Deal","Payment"]}(),function(){"use strict";function e(e,t){return moment.unix(e).format(t||"YYYY-MM-DD HH:mm:ss")}function t(){return function(e){return moment(e).fromNow()}}function n(e){return moment.unix(e).fromNow()}angular.module("app.dashboard").filter("moment_unix",e).filter("moment_from_now",t).filter("moment_unix_from_now",n),e.$inject=["input","format"],n.$inject=["input"]}(),function(){"use strict";function e(){function e(e,t,n){var o=250;t.slimScroll({height:n.height||o})}var t={link:e,restrict:"EA"};return t}angular.module("app.elements").directive("scrollable",e)}(),function(){"use strict";function e(){function e(e,t){var n=t.data();n.classInput=t.data("classinput")||n.classInput,t.filestyle(n)}var t={link:e,restrict:"A"};return t}angular.module("app.forms").directive("filestyle",e)}(),function(){"use strict";function e(e){function t(t,o,r){var a=e(r.validateSteps)(t),i=new n(r.steps,!!a,o);t.wizard=i.init()}function n(e,t,n){var o=this;o.quantity=parseInt(e,10),o.validate=t,o.element=n,o.init=function(){return o.createsteps(o.quantity),o.go(1),o},o.go=function(e){if(angular.isDefined(o.steps[e])){if(o.validate&&1!==e){var t=$(o.element),n=t.children().children("div").get(e-2);if(!1===t.parsley().validate(n.id))return!1}o.cleanall(),o.steps[e]=!0}},o.active=function(e){return!!o.steps[e]},o.cleanall=function(){for(var e in o.steps)o.steps[e]=!1},o.createsteps=function(e){o.steps=[];for(var t=1;e>=t;t++)o.steps[t]=!1}}var o={link:t,restrict:"A",scope:!0};return o}angular.module("app.forms").directive("formWizard",e),e.$inject=["$parse"]}(),function(){"use strict";function e(){function e(e,t){var n=$(t);$.fn.inputmask&&n.inputmask()}var t={link:e,restrict:"A"};return t}angular.module("app.forms").directive("masked",e)}(),function(){"use strict";function e(){function e(e,t){var n=[];return angular.isArray(e)?e.forEach(function(e){for(var o=!1,r=Object.keys(t),a=0;a<r.length;a++){var i=r[a],s=t[i].toLowerCase();if(-1!==e[i].toString().toLowerCase().indexOf(s)){o=!0;break}}o&&n.push(e)}):n=e,n}return e}angular.module("app.forms").filter("propsFilter",e)}(),function(){"use strict";function e(e){function t(t,n,o,r){n.on("itemAdded itemRemoved",function(){r.$viewValue&&r.$viewValue.split&&(r.$setViewValue(r.$viewValue.split(",")),r.$render())}),e(function(){n.tagsinput()})}var n={link:t,require:"ngModel",restrict:"A"};return n}angular.module("app.forms").directive("tagsinput",e),e.$inject=["$timeout"]}(),function(){"use strict";function e(){function e(e,t){var n=$(t);$.fn.parsley&&n.parsley()}var t={link:e,restrict:"A"};return t}angular.module("app.forms").directive("validateForm",e)}(),function(){"use strict";function e(e,t,n,o,r,a){function i(){s.keyword="",s.tableParams=new t({count:10},{getData:function(e,t){var o={where:{status:{ne:"deleted"}},include:["inventories"]};if(""!=s.keyword){var r={regex:keyword};o.where.or=[{"item.name":r},{model:r}],t.page(1)}a.getData(e,t,n,o)}})}var s=this;i(),s.stock=function(e,t){o.open({template:"stockDialogId",controller:"StockDialogController",data:{sku:e,type:t}})},s["delete"]=function(e){r.swal({title:"确定删除商品"+e.item.name,text:"删除商品后将无法恢复，你确定要删除商品？",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"是的，删除！",cancelButtonText:"不，取消！",closeOnConfirm:!1},function(t){t&&(e.status="deleted",e.$save(function(){r.swal("已删除!","你的商品"+e.item.name+"已经删除。","success")},function(e){r.swal("失败!","删除商品时发生错误，你的商品没有被删除。","error")}))})},s.confirm=function(e){var t=e.inventories[0];t.inventoryAt=new Date,n.prototype$__updateById__inventories({id:e.id,fk:t.id},{inventoryAt:t.inventoryAt})}}function t(e,t){function n(){e.entity={type:"entity",name:"iPhone6S Plus",skus:[{barcode:"456",price:608800,model:"16GB",stockQty:3}]}}n(),window.ParsleyValidator.setLocale("zh_cn"),e.save=function(){t.create(e.entity).$promise.then(function(t){e.$state.go("app.item")})},e.saveAndMore=function(){t.create(e.entity)}}function n(e,t,n,o,r){function a(){e.stockQty=0}a(),e.confirm=function(){var a=e.ngDialogData.sku,i=e.ngDialogData.type,s=e.ngDialogData.memo;n.create({skuId:a.id,qty:e.stockQty,type:i,memo:s}),a.inventories[0].qty+=e.stockQty,t.close(),o.pop("success","成功","完成"+r("stock_type")(i)+a.item.name+": "+e.stockQty+"件")}}function o(e,t,n){function o(){r.filter={text:""},r.tableParams=new n({count:10,filter:r.filter.text},{getData:function(e,n){var o={where:{},include:["sku"]};o.limit=n.count(),o.skip=(n.page()-1)*o.limit,""!=r.filter.text&&(o.skip=0),t.count({where:o.where},function(n){r.tableParams.total(n.count),t.find({filter:o},e.resolve)})}})}var r=this;o()}angular.module("app.items",[]).controller("ItemsController",e).controller("StockDialogController",n).controller("StocksController",o).controller("ItemAddController",t),e.$inject=["$scope","ngTableParams","Sku","ngDialog","SweetAlert","ngTableLBService"],t.$inject=["$scope","Item"],n.$inject=["$scope","ngDialog","Stock","toaster","$filter"],o.$inject=["$scope","Stock","ngTableParams"]}(),function(){"use strict";function e(){var e={entity:"实物商品",service:"服务项目"};return function(t){return e[t]}}function t(){return function(e){return"¥ "+e/100}}function n(){var e={stock:"进货入库",sale:"销售出库",cancel:"核销出库",inventory:"盘点修正",transfer:"库存调货"};return function(t){return t=t||"stock",e[t]}}angular.module("app.items").filter("item_type",e).filter("stock_type",n).filter("currency_cny",t)}(),function(){"use strict";function e(e,t){e.config({debug:!1,events:!0,modules:t.modules})}angular.module("app.lazyload").config(e),e.$inject=["$ocLazyLoadProvider","APP_REQUIRES"]}(),function(){"use strict";angular.module("app.lazyload").constant("APP_REQUIRES",{scripts:{whirl:["vendor/whirl/dist/whirl.css"],classyloader:["vendor/jquery-classyloader/js/jquery.classyloader.min.js"],animo:["vendor/animo.js/animo.js"],fastclick:["vendor/fastclick/lib/fastclick.js"],modernizr:["vendor/modernizr/modernizr.js"],animate:["vendor/animate.css/animate.min.css"],skycons:["vendor/skycons/skycons.js"],icons:["vendor/fontawesome/css/font-awesome.min.css","vendor/simple-line-icons/css/simple-line-icons.css"],"weather-icons":["vendor/weather-icons/css/weather-icons.min.css"],sparklines:["app/vendor/sparklines/jquery.sparkline.min.js"],wysiwyg:["vendor/bootstrap-wysiwyg/bootstrap-wysiwyg.js","vendor/bootstrap-wysiwyg/external/jquery.hotkeys.js"],slimscroll:["vendor/slimScroll/jquery.slimscroll.min.js"],screenfull:["vendor/screenfull/dist/screenfull.js"],"vector-map":["vendor/ika.jvectormap/jquery-jvectormap-1.2.2.min.js","vendor/ika.jvectormap/jquery-jvectormap-1.2.2.css"],"vector-map-maps":["vendor/ika.jvectormap/jquery-jvectormap-world-mill-en.js","vendor/ika.jvectormap/jquery-jvectormap-us-mill-en.js"],loadGoogleMapsJS:["app/vendor/gmap/load-google-maps.js"],"flot-chart":["vendor/Flot/jquery.flot.js"],"flot-chart-plugins":["vendor/flot.tooltip/js/jquery.flot.tooltip.min.js","vendor/Flot/jquery.flot.resize.js","vendor/Flot/jquery.flot.pie.js","vendor/Flot/jquery.flot.time.js","vendor/Flot/jquery.flot.categories.js","vendor/flot-spline/js/jquery.flot.spline.min.js"],"jquery-ui":["vendor/jquery-ui/ui/core.js","vendor/jquery-ui/ui/widget.js"],"jquery-ui-widgets":["vendor/jquery-ui/ui/core.js","vendor/jquery-ui/ui/widget.js","vendor/jquery-ui/ui/mouse.js","vendor/jquery-ui/ui/draggable.js","vendor/jquery-ui/ui/droppable.js","vendor/jquery-ui/ui/sortable.js","vendor/jqueryui-touch-punch/jquery.ui.touch-punch.min.js"],moment:["vendor/moment/min/moment-with-locales.min.js"],inputmask:["vendor/jquery.inputmask/dist/jquery.inputmask.bundle.min.js"],flatdoc:["vendor/flatdoc/flatdoc.js"],codemirror:["vendor/codemirror/lib/codemirror.js","vendor/codemirror/lib/codemirror.css"],"codemirror-modes-web":["vendor/codemirror/mode/javascript/javascript.js","vendor/codemirror/mode/xml/xml.js","vendor/codemirror/mode/htmlmixed/htmlmixed.js","vendor/codemirror/mode/css/css.js"],taginput:["vendor/bootstrap-tagsinput/dist/bootstrap-tagsinput.css","vendor/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"],filestyle:["vendor/bootstrap-filestyle/src/bootstrap-filestyle.js"],parsley:["vendor/parsleyjs/src/i18n/zh_cn.extra.js","vendor/parsleyjs/dist/parsley.min.js","vendor/parsleyjs/src/i18n/zh_cn.js"],fullcalendar:["vendor/fullcalendar/dist/fullcalendar.min.js","vendor/fullcalendar/dist/fullcalendar.css"],gcal:["vendor/fullcalendar/dist/gcal.js"],chartjs:["vendor/Chart.js/Chart.js"],morris:["vendor/raphael/raphael.js","vendor/morris.js/morris.js","vendor/morris.js/morris.css"],"loaders.css":["vendor/loaders.css/loaders.css"],spinkit:["vendor/spinkit/css/spinkit.css"]},modules:[{name:"toaster",files:["vendor/angularjs-toaster/toaster.js","vendor/angularjs-toaster/toaster.css"]},{name:"localytics.directives",files:["vendor/chosen_v1.2.0/chosen.jquery.min.js","vendor/chosen_v1.2.0/chosen.min.css","vendor/angular-chosen-localytics/chosen.js"]},{name:"ngDialog",files:["vendor/ngDialog/js/ngDialog.min.js","vendor/ngDialog/css/ngDialog.min.css","vendor/ngDialog/css/ngDialog-theme-default.min.css"]},{name:"ngWig",files:["vendor/ngWig/dist/ng-wig.min.js"]},{name:"ngTable",files:["vendor/ng-table/dist/ng-table.min.js","vendor/ng-table/dist/ng-table.min.css"]},{name:"ngTableExport",files:["vendor/ng-table-export/ng-table-export.js"]},{name:"angularBootstrapNavTree",files:["vendor/angular-bootstrap-nav-tree/dist/abn_tree_directive.js","vendor/angular-bootstrap-nav-tree/dist/abn_tree.css"]},{name:"htmlSortable",files:["vendor/html.sortable/dist/html.sortable.js","vendor/html.sortable/dist/html.sortable.angular.js"]},{name:"xeditable",files:["vendor/angular-xeditable/dist/js/xeditable.js","vendor/angular-xeditable/dist/css/xeditable.css"]},{name:"angularFileUpload",files:["vendor/angular-file-upload/angular-file-upload.js"]},{name:"ngImgCrop",files:["vendor/ng-img-crop/compile/unminified/ng-img-crop.js","vendor/ng-img-crop/compile/unminified/ng-img-crop.css"]},{name:"ui.select",files:["vendor/angular-ui-select/dist/select.js","vendor/angular-ui-select/dist/select.css"]},{name:"ui.codemirror",files:["vendor/angular-ui-codemirror/ui-codemirror.js"]},{name:"angular-carousel",files:["vendor/angular-carousel/dist/angular-carousel.css","vendor/angular-carousel/dist/angular-carousel.js"]},{name:"ngGrid",files:["vendor/ng-grid/build/ng-grid.min.js","vendor/ng-grid/ng-grid.css"]},{name:"infinite-scroll",files:["vendor/ngInfiniteScroll/build/ng-infinite-scroll.js"]},{name:"ui.bootstrap-slider",files:["vendor/seiyria-bootstrap-slider/dist/bootstrap-slider.min.js","vendor/seiyria-bootstrap-slider/dist/css/bootstrap-slider.min.css","vendor/angular-bootstrap-slider/slider.js"]},{name:"ui.grid",files:["vendor/angular-ui-grid/ui-grid.min.css","vendor/angular-ui-grid/ui-grid.min.js"]},{name:"textAngular",files:["vendor/textAngular/dist/textAngular.css","vendor/textAngular/dist/textAngular-rangy.min.js","vendor/textAngular/dist/textAngular-sanitize.js","vendor/textAngular/src/globals.js","vendor/textAngular/src/factories.js","vendor/textAngular/src/DOM.js","vendor/textAngular/src/validators.js","vendor/textAngular/src/taBind.js","vendor/textAngular/src/main.js","vendor/textAngular/dist/textAngularSetup.js"],serie:!0},{name:"angular-rickshaw",files:["vendor/d3/d3.min.js","vendor/rickshaw/rickshaw.js","vendor/rickshaw/rickshaw.min.css","vendor/angular-rickshaw/rickshaw.js"],serie:!0},{name:"angular-chartist",files:["vendor/chartist/dist/chartist.min.css","vendor/chartist/dist/chartist.js","vendor/angular-chartist.js/dist/angular-chartist.js"],serie:!0},{name:"ui.map",files:["vendor/angular-ui-map/ui-map.js"]},{name:"datatables",files:["vendor/datatables/media/css/jquery.dataTables.css","vendor/datatables/media/js/jquery.dataTables.js","vendor/angular-datatables/dist/angular-datatables.js"],serie:!0},{name:"angular-jqcloud",files:["vendor/jqcloud2/dist/jqcloud.css","vendor/jqcloud2/dist/jqcloud.js","vendor/angular-jqcloud/angular-jqcloud.js"]},{name:"angularGrid",files:["vendor/ag-grid/dist/angular-grid.css","vendor/ag-grid/dist/angular-grid.js","vendor/ag-grid/dist/theme-dark.css","vendor/ag-grid/dist/theme-fresh.css"]},{name:"ng-nestable",files:["vendor/ng-nestable/src/angular-nestable.js","vendor/nestable/jquery.nestable.js"]},{name:"akoenig.deckgrid",files:["vendor/angular-deckgrid/angular-deckgrid.js"]},{name:"oitozero.ngSweetAlert",files:["vendor/sweetalert/dist/sweetalert.css","vendor/sweetalert/dist/sweetalert.min.js","vendor/angular-sweetalert/SweetAlert.js"]},{name:"bm.bsTour",files:["vendor/bootstrap-tour/build/css/bootstrap-tour.css","vendor/bootstrap-tour/build/js/bootstrap-tour-standalone.js","vendor/angular-bootstrap-tour/dist/angular-bootstrap-tour.js"],serie:!0},{name:"ui.knob",files:["vendor/angular-knob/src/angular-knob.js","vendor/jquery-knob/dist/jquery.knob.min.js"]},{name:"easypiechart",files:["vendor/jquery.easy-pie-chart/dist/angular.easypiechart.min.js"]},{name:"colorpicker.module",files:["vendor/angular-bootstrap-colorpicker/css/colorpicker.css","vendor/angular-bootstrap-colorpicker/js/bootstrap-colorpicker-module.js"]}]})}(),function(){"use strict";function e(e){e.includeBar=!0,e.includeSpinner=!1,e.latencyThreshold=500,e.parentSelector=".wrapper > section"}angular.module("app.loadingbar").config(e),e.$inject=["cfpLoadingBarProvider"]}(),function(){"use strict";function e(e,t,n){var o;e.$on("$stateChangeStart",function(){$(".wrapper > section").length&&(o=t(function(){n.start()},0))}),e.$on("$stateChangeSuccess",function(e){e.targetScope.$watch("$viewContentLoaded",function(){t.cancel(o),n.complete()})})}angular.module("app.loadingbar").run(e),e.$inject=["$rootScope","$timeout","cfpLoadingBar"]}(),function(){"use strict";function e(e){e.defaultLocale("zh"),e.localeLocationPattern("vendor/angular-i18n/angular-locale_{{locale}}.js")}angular.module("app.locale").config(e),e.$inject=["tmhDynamicLocaleProvider"]}(),function(){"use strict";function e(e,t,n){function o(){e.availableLocales={en:"English",es:"Spanish",de:"German",fr:"French",ar:"Arabic",ja:"Japanese",ko:"Korean",zh:"Chinese"},e.model={selectedLocale:"zh"},e.$locale=n,e.changeLocale=t.set}o()}angular.module("app.locale").controller("LocalizationController",e),e.$inject=["$rootScope","tmhDynamicLocale","$locale"]}(),function(){"use strict";function e(e,t,n,o,r,a,i){function s(){e.qrcodeService=a,l.keyword="",l.tableParams=new n({count:10},{getData:function(e,n){var r={where:{status:{ne:"deleted"}},include:["wxuser"]};if(""!=l.keyword){var a={regex:keyword};r.where.or=[{"entities.sku.item.name":a}],n.page(1)}o.getData(e,n,t,r)}})}var l=this;s(),l.sell=function(t){i.openDeal(t),e.$state.go("app.sell")}}function t(e,t,n,o,r,a,i){function s(){c=e.$state.params.memberId,l.member=t.findOne({filter:{where:{id:c},include:["wxuser"]}}),l.dealTableParams.reload(),l.depositTableParams.reload(),l.bonusTableParams.reload()}var l=this,c=e.$state.params.memberId;l.dealTableParams=new n({count:10},{getData:function(e,n){var o={where:{status:{ne:"deleted"}}};o.limit=n.count(),o.skip=(n.page()-1)*o.limit,t.deals.count({id:c,where:o.where},function(e){l.dealTableParams.total(e.count)}),t.deals({id:c,filter:o},e.resolve)}}),l.depositTableParams=new n({count:10},{getData:function(e,n){var o={where:{status:{ne:"deleted"},or:[{type:"deposit"},{category:"deposit"}]},include:["shop"]};o.limit=n.count(),o.skip=(n.page()-1)*o.limit,t.payments.count({id:c,where:o.where},function(e){l.depositTableParams.total(e.count)}),t.payments({id:c,filter:o},e.resolve)}}),l.bonusTableParams=new n({count:10},{getData:function(e,n){var o={where:{status:{ne:"deleted"}},include:[]};o.limit=n.count(),o.skip=(n.page()-1)*o.limit,t.bonuses.count({id:c,where:o.where},function(e){l.bonusTableParams.total(e.count)}),t.bonuses({id:c,filter:o},e.resolve)}}),s(),l.sell=function(){a.openDeal(l.member),e.$state.go("app.sell")},l.recharge=function(){i.open({template:"rechargeDialogId",controller:"rechargeDialogController"}).closePromise.then(function(e){s()})},l.setBonus=function(){i.open({template:"bonusDialogId",controller:"bonusDialogController"}).closePromise.then(function(e){s()})}}function n(e,t,n,o,r){function a(){i=e.$state.params.memberId,e.member=n.findById({id:i}),e.data={type:"cash",amount:0,category:"deposit"},e.payType=r.payType,e.cash={paid:0,change:0}}a();var i=e.$state.params.memberId;e.onChangePayType=function(){"cash"===data.type?(e.data.cost=e.data.amount%e.user.merchant.changeRate,e.data.amount-=e.data.cost,e.countChange()):e.data.cost=0},e.countChange=function(){e.cash.paid=e.cash.paid,e.cash.change=e.data.amount-e.cash.paid},e.confirm=function(){0!==e.data.amount&&(n.payments.create({id:i},e.data).$promise.then(function(n){e.submiting=!1,t.close(),o.pop("success","成功","完成储值操作")},function(t){e.submiting=!1,o.pop("error","失败","储值操作未完成，请重试！")}),e.submiting=!0)}}function o(e,t,n,o){function r(){a=e.$state.params.memberId,e.member=n.findById({id:a}),e.data={amount:0,memo:"manual"}}r();var a=e.$state.params.memberId;e.confirm=function(){0!==e.data.amount&&(e.data.amount>0?e.data.memo="manual":e.data.amount<0&&(e.data.memo="writeoff"),n.bonuses.create({id:a},e.data).$promise.then(function(n){e.submiting=!1,t.close(),o.pop("success","成功","完成储值操作")},function(t){e.submiting=!1,o.pop("error","失败","储值操作未完成，请重试！")}),e.submiting=!0)}}angular.module("app.members").controller("MembersController",e).controller("MemberController",t).controller("rechargeDialogController",n).controller("bonusDialogController",o),e.$inject=["$scope","Member","ngTableParams","ngTableLBService","SweetAlert","qrcodeService","dealService"],t.$inject=["$scope","Member","ngTableParams","ngTableLBService","SweetAlert","dealService","ngDialog"],n.$inject=["$scope","ngDialog","Member","toaster","dealService"],o.$inject=["$scope","ngDialog","Member","toaster"]}(),function(){"use strict";function e(){var e=["保密","男","女"];return function(t){return e[t]}}function t(){var e=["未关注","已关注"];return function(t){return e[t]}}function n(){return function(e){return"deposit"===e.type?e.amount<0?"储值消费":"储值退款":"deposit"===e.category?e.amount<0?"提现":"充值":"未知"}}function o(){var e={reward:"消费积分",vouch:"消费抵扣",manual:"手动积分",writeoff:"手动减计",exchange:"兑换"};return function(t){return e[t]}}angular.module("app.members").filter("wx_sex",e).filter("wx_subscribe",t).filter("deposit_category",n).filter("bonus_memo",o)}(),function(){"use strict";function e(e){function t(t){t=t||"app/img/qrcode-for-gh.jpg",e.open({template:"<img src="+t+" class='img-responsive'>",plain:!0,className:"ngdialog-theme-default"})}this.showQRCode=t}angular.module("app.members").service("qrcodeService",e),e.$inject=["ngDialog"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){t.theme="bs3",n.bs3.inputClass="input-sm",n.bs3.buttonsClass="btn-sm",n.bs3.submitTpl='<button type="submit" class="btn btn-success"><span class="fa fa-check"></span></button>',n.bs3.cancelTpl='<button type="button" class="btn btn-default" ng-click="$form.$cancel()"><span class="fa fa-times text-muted"></span></button>',i.shop=e.user.shop,i.merchant=e.user.merchant}var i=this;AMap.service("AMap.DistrictSearch",function(){var e=new AMap.DistrictSearch({level:"country",subdistrict:3});e.search("中国",function(e,t){i.provinces=t.districtList[0].districtList})}),a(),i.update=function(e,t,n){i[e][t]=n.name},i.saveShop=function(){o.upsert(i.shop);
},i.saveMerchant=function(){r.upsert(i.merchant)}}function t(e,t,n){function o(){}o(),e.filter={text:""},e.tableParams=new ngTableParams({count:10,filter:e.filter.text},{getData:function(t,n){var o={order:"subscribe_time DESC"};if(o.limit=n.count(),o.skip=(n.page()-1)*o.limit,o.where={},""!=e.filter.text){console.log(e.filter.text);var r={regex:e.filter.text};o.where.or=[{nickname:r},{remark:r}],o.skip=0}Sku.count({where:o.where},function(n){e.tableParams.total(n.count),Sku.find({filter:o},t.resolve)})}})}function n(e,t){function n(){e.entity={type:"entity",name:"iPhone6S Plus",skus:[{barcode:"123",price:5288,model:"16G"}]}}n(),window.ParsleyValidator.setLocale("zh_cn"),e.save=function(){},e.saveAndMore=function(){}}angular.module("app.myshop",[]).controller("MyShopController",e).controller("ShopsController",t).controller("ShopAddController",n),e.$inject=["$scope","editableOptions","editableThemes","Shop","Merchant"],t.$inject=["$scope","ngTable","Shop"],n.$inject=["$scope","Shop"]}(),function(){"use strict";function e(){var e={entity:"实体商品",service:"服务项目"};return function(t){return e[t]}}angular.module("app.myshop").filter("item_type2",e)}(),function(){"use strict";function e(e,t){function n(){o.msgHtml='<em class="fa fa-check"></em> Message with icon..',o.notifyMsg="Some messages here..",o.notifyOpts={status:"danger",pos:"bottom-center"},t(function(){e.alert("This is a custom message from notify..",{status:"success"})},500)}var o=this;n()}angular.module("app.notify").controller("NotifyDemoCtrl",e),e.$inject=["Notify","$timeout"]}(),function(){"use strict";function e(e,t){function n(e,n){n.on("click",function(n){n.preventDefault(),t.alert(e.message,e.options)})}var o={link:n,restrict:"A",scope:{options:"=",message:"="}};return o}angular.module("app.notify").directive("notify",e),e.$inject=["$window","Notify"]}(),function(){"use strict";function e(e){function t(t,n){t&&e(function(){$.notify(t,n||{})})}this.alert=t}angular.module("app.notify").service("Notify",e),e.$inject=["$timeout"]}(),function(e){"use strict";var t={},n={},o=function(t){return"string"===e.type(t)&&(t={message:t}),arguments[1]&&(t=e.extend(t,"string"===e.type(arguments[1])?{status:arguments[1]}:arguments[1])),new a(t).show()},r=function(e,t){var o;if(e)for(o in n)e===n[o].group&&n[o].close(t);else for(o in n)n[o].close(t)},a=function(o){this.options=e.extend({},a.defaults,o),this.uuid="ID"+(new Date).getTime()+"RAND"+Math.ceil(1e5*Math.random()),this.element=e(['<div class="uk-notify-message alert-dismissable">','<a class="close">&times;</a>',"<div>"+this.options.message+"</div>","</div>"].join("")).data("notifyMessage",this),this.options.status&&(this.element.addClass("alert alert-"+this.options.status),this.currentstatus=this.options.status),this.group=this.options.group,n[this.uuid]=this,t[this.options.pos]||(t[this.options.pos]=e('<div class="uk-notify uk-notify-'+this.options.pos+'"></div>').appendTo("body").on("click",".uk-notify-message",function(){e(this).data("notifyMessage").close()}))};return e.extend(a.prototype,{uuid:!1,element:!1,timout:!1,currentstatus:"",group:!1,show:function(){if(!this.element.is(":visible")){var e=this;t[this.options.pos].show().prepend(this.element);var n=parseInt(this.element.css("margin-bottom"),10);return this.element.css({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0}).animate({opacity:1,"margin-top":0,"margin-bottom":n},function(){if(e.options.timeout){var t=function(){e.close()};e.timeout=setTimeout(t,e.options.timeout),e.element.hover(function(){clearTimeout(e.timeout)},function(){e.timeout=setTimeout(t,e.options.timeout)})}}),this}},close:function(e){var o=this,r=function(){o.element.remove(),t[o.options.pos].children().length||t[o.options.pos].hide(),delete n[o.uuid]};this.timeout&&clearTimeout(this.timeout),e?r():this.element.animate({opacity:0,"margin-top":-1*this.element.outerHeight(),"margin-bottom":0},function(){r()})},content:function(e){var t=this.element.find(">div");return e?(t.html(e),this):t.html()},status:function(e){return e?(this.element.removeClass("alert alert-"+this.currentstatus).addClass("alert alert-"+e),this.currentstatus=e,this):this.currentstatus}}),a.defaults={message:"",status:"normal",timeout:5e3,group:null,pos:"top-center"},e.notify=o,e.notify.message=a,e.notify.closeAll=r,o}(jQuery),function(){"use strict";function e(e,t,n){function o(){r.account={realm:"merchant",remember:!0},r.authMsg="",r.login=function(){r.authMsg="",r.loginForm.$valid?t.login(r.account,function(t){n.$broadcast("User.logined"),e.go("app.dashboard")},function(e){r.authMsg=e.data.error.message}):(r.loginForm.account_username.$dirty=!0,r.loginForm.account_password.$dirty=!0)}}var r=this;o()}angular.module("app.pages").controller("LoginFormController",e),e.$inject=["$state","User","$rootScope"]}(),function(){"use strict";function e(e,t,n,o){function r(){a.account={realm:"merchant",role:"owner"},a.agreed=!0,a.authMsg="",a.register=function(){a.authMsg="",a.registerForm.$valid?(a.account.email=a.account.username+"@fankahui.com",a.account.phone=a.account.username,n.create(a.account,function(o){n.login({username:a.account.username,password:a.account.password}).$promise.then(function(n){e.$broadcast("User.logined"),t.go("app.dashboard")})},function(e){a.authMsg=o("register_error")(e.data.error.message)})):(a.registerForm.account_username.$dirty=!0,a.registerForm.account_password.$dirty=!0,a.registerForm.account_agreed.$dirty=!0)}}var a=this;r()}angular.module("app.pages").controller("RegisterFormController",e),e.$inject=["$rootScope","$state","User","$filter"]}(),function(){"use strict";function e(){return function(e){return/Merchant name exist/.test(e)?"商户名字已经存在":/User already exists/.test(e)?"用户名已经存在":e}}angular.module("app.pages").filter("register_error",e)}(),function(){"use strict";function e(){var e={controller:t,restrict:"A",scope:!1};return e}function t(e,t,n,o){function r(e,t){if(!e)return!1;var n=angular.fromJson(o[i]);n||(n={}),n[e]=t,o[i]=angular.toJson(n)}function a(e){if(!e)return!1;var t=angular.fromJson(o[i]);return t?t[e]:void 0}var i="panelState",s=$(t),l=s.closest(".panel"),c=l.attr("id"),u=a(c);"undefined"!=typeof u&&n(function(){e[c]=u},10),t.bind("click",function(t){t.preventDefault(),r(c,!e[c])})}angular.module("app.panels").directive("panelCollapse",e),t.$inject=["$scope","$element","$timeout","$localStorage"]}(),function(){"use strict";function e(){var e={controller:t,restrict:"A"};return e}function t(e,t,n,o){var r="panel-remove",a="panel-removed";t.on("click",function(t){function i(){var t=n.defer(),o=t.promise;e.$emit(r,c.attr("id"),t),o.then(s)}function s(){o.support.animation?c.animo({animation:"bounceOut"},l):l()}function l(){var t=c.parent();c.remove(),t.filter(function(){var e=$(this);return e.is('[class*="col-"]:not(.sortable)')&&0===e.children("*").length}).remove(),e.$emit(a,c.attr("id"))}t.preventDefault();var c=$(this).closest(".panel");i()})}angular.module("app.panels").directive("panelDismiss",e),t.$inject=["$scope","$element","$q","Utils"]}(),function(){"use strict";function e(){var e={controller:t,restrict:"A",scope:!1};return e}function t(e,t){function n(e,t){if(t){var n="#"===t.charAt(0)?t:"#"+t;angular.element(n).removeClass(r)}}var o="panel-refresh",r="whirl",a="standard";t.on("click",function(t){t.preventDefault();var n=$(this),i=n.parents(".panel").eq(0),s=n.data("spinner")||a;i.addClass(r+" "+s),e.$emit(o,i.attr("id"))}),e.$on("removeSpinner",n)}angular.module("app.panels").directive("panelRefresh",e),t.$inject=["$scope","$element"]}(),function(){"use strict";function e(e,t){function n(n,o,r){function a(e,t){var n="";return t=t||{},t.toolCollapse&&(n+=i.collapse.replace(/{{panelId}}/g,e.parent().parent().attr("id"))),t.toolDismiss&&(n+=i.dismiss),t.toolRefresh&&(n+=i.refresh.replace(/{{spinner}}/g,t.toolRefresh)),n}var i={collapse:'<a href="#" panel-collapse="" uib-tooltip="Collapse Panel" ng-click="{{panelId}} = !{{panelId}}">                         <em ng-show="{{panelId}}" class="fa fa-plus"></em>                         <em ng-show="!{{panelId}}" class="fa fa-minus"></em>                       </a>',dismiss:'<a href="#" panel-dismiss="" uib-tooltip="Close Panel">                       <em class="fa fa-times"></em>                     </a>',refresh:'<a href="#" panel-refresh="" data-spinner="{{spinner}}" uib-tooltip="Refresh Panel">                       <em class="fa fa-refresh"></em>                     </a>'},s=n.panelTools||r;t(function(){o.html(a(o,s)).show(),e(o.contents())(n),o.addClass("pull-right")})}var o={link:n,restrict:"E",scope:!1};return o}angular.module("app.panels").directive("paneltool",e),e.$inject=["$compile","$timeout"]}(),function(){"use strict";function e(e,t){function n(){e.$watch("panelDemo1",function(e){console.log("panelDemo1 collapsed: "+e)}),e.$on("panel-remove",function(e,t,n){console.log("Panel #"+t+" removing"),n.resolve()}),e.$on("panel-removed",function(e,t){console.log("Panel #"+t+" removed")}),e.$on("panel-refresh",function(n,o){var r=3;console.log("Refreshing during "+r+"s #"+o),t(function(){e.$broadcast("removeSpinner",o),console.log("Refreshed #"+o)},3e3)}),e.panels=[{id:"panelRepeat1",title:"Panel Title 1",body:"Nulla eget lorem leo, sit amet elementum lorem. "},{id:"panelRepeat2",title:"Panel Title 2",body:"Nulla eget lorem leo, sit amet elementum lorem. "},{id:"panelRepeat3",title:"Panel Title 3",body:"Nulla eget lorem leo, sit amet elementum lorem. "}]}n()}angular.module("app.panels").controller("PanelsCtrl",e),e.$inject=["$scope","$timeout"]}(),function(){"use strict";function e(e,t){function n(e,t){$.fn.sortable&&t.sortable({connectWith:"[portlet]",items:"div.panel",handle:".portlet-handler",opacity:.7,placeholder:"portlet box-placeholder",cancel:".portlet-cancel",forcePlaceholderSize:!0,iframeFix:!1,tolerance:"pointer",helper:"original",revert:200,forceHelperSize:!0,update:o,create:r})}function o(n){var o=n.target,r=angular.fromJson(t[a]);r||(r={}),r[o.id]=$(o).sortable("toArray"),r&&e(function(){t[a]=angular.toJson(r)})}function r(e){var n=e.target,o=angular.fromJson(t[a]);if(o){var r=n.id,i=o[r];if(i){var s=$("#"+r);$.each(i,function(e,t){$("#"+t).appendTo(s)})}}}var a="portletState";return{restrict:"A",link:n}}angular.module("app.panels").directive("portlet",e),e.$inject=["$timeout","$localStorage"]}(),function(){"use strict";function e(e,t,n){function o(o,r){function a(){var e=100-c;c+=.015*Math.pow(1-Math.sqrt(e),2),o.loadCounter=parseInt(c,10),l=t(a,20)}function i(){t.cancel(l),o.loadCounter=100,t(function(){e.addClass(r,"preloader-hidden"),angular.element("body").css("overflow","")},300)}function s(){var e=n.defer(),r=0,a=o.$on("$viewContentLoaded",function(){r++,2===r&&(t(function(){e.resolve()},3e3),a())});return e.promise}o.loadCounter=0;var l,c=0;angular.element("body").css("overflow","hidden"),r.addClass("preloader"),s().then(i),l=t(a)}var r={restrict:"EAC",template:'<div class="preloader-progress"><div class="preloader-progress-bar" ng-style="{width: loadCounter + \'%\'}"></div></div>',link:o};return r}angular.module("app.preloader").directive("preloader",e),e.$inject=["$animate","$timeout","$q"]}(),function(){"use strict";function e(e,t,n,o){function r(e){m.deal={entities:[],totalAmount:0,totalQty:0,member:e,status:"opened",created:new Date},m.selectedSku=void 0}function a(e){return t.find({filter:{where:{barcode:{regex:e}}},limit:10}).$promise.then(function(e){return e})}function i(){if(m.selectedSku&&m.selectedSku instanceof t){var e=void 0;angular.forEach(m.deal.entities,function(t){t.sku.barcode===m.selectedSku.barcode&&(t.qty++,e=t)}),e||(e={sku:m.selectedSku,qty:1},m.deal.entities.push(e))}m.selectedSku=void 0}function s(e,t){e.qty--,0===e.qty&&m.deal.entities.splice(t,1)}function l(){return m.deal.totalAmount=0,m.deal.totalQty=0,angular.forEach(m.deal.entities,function(e){m.deal.totalQty+=e.qty,m.deal.totalAmount+=e.qty*e.sku.price}),m.deal.totalAmount}function c(){m.deal.payment={type:"cash"},m.deal.member?(m.deal.memberId=m.deal.member.id,m.deal.discountAmount=m.deal.totalAmount*(100-m.deal.member.discount)/100,o.user.merchant.enableBonusBid&&(m.deal.bonusVouchAmount=Math.round(m.deal.member.bonus/o.user.merchant.bonusBidRate))):m.deal.discountAmount=0,m.deal.fee=m.deal.totalAmount-m.deal.discountAmount,m.deal.member&&(o.user.merchant.enableBonusBid&&(m.deal.bonusVouchAmount>m.deal.fee&&(m.deal.bonusVouchAmount=m.deal.fee),m.deal.fee-=m.deal.bonusVouchAmount),m.deal.member.balance>=m.deal.fee&&(m.deal.payment.type="deposit")),u(),n.open({template:"checkoutDialogId",controller:"checkoutDialogController"})}function u(){m.deal.payment.amount=m.deal.fee,"cash"===m.deal.payment.type?(m.deal.payment.change=m.deal.fee%o.user.merchant.changeRate,m.deal.payment.amount-=m.deal.payment.change,d()):"deposit"===m.deal.payment.type?m.deal.payment.amount=0-m.deal.fee:m.deal.payment.amount=m.deal.fee}function d(){"cash"===m.deal.payment.type&&(m.cash=m.cash||{},m.cash.paid=m.cash.paid||m.deal.payment.amount,m.cash.change=m.deal.payment.amount-m.cash.paid)}function p(){return m.deal.status="closed",delete m.deal.member,e.create(m.deal).$promise}var m=this;this.openDeal=r,this.querySkus=a,this.register=i,this.substractOne=s,this.countTotal=l,this.checkout=c,this.onChangePayType=u,this.countChange=d,this.pay=p,this.payType={deposit:"会员储值",cash:"现金支付",bankcard:"刷卡支付",wxpay:"微信支付",alipay:"支付宝"}}function t(e,t,n,o){function r(e){l.deal=e,l.postData={entities:[],totalAmount:0,totalQty:0,status:"opened",created:new Date}}function a(){l.postData.totalAmount=0,l.postData.totalQty=0,l.postData.entities.forEach(function(e){l.postData.totalAmount+=e.qty*e.sku.price,l.postData.totalQty+=e.qty}),l.postData.discountAmount=0,l.deal.member&&(l.postData.discountAmount=l.postData.totalAmount*(100-l.deal.member.discount)/100),l.postData.fee=l.postData.totalAmount-l.postData.discountAmount,l.postData.payment.amount=l.postData.fee,"cash"===l.postData.payment.type&&(l.postData.payment.change=l.postData.fee%o.user.merchant.changeRate,l.postData.payment.amount-=l.postData.payment.change)}function i(e){l.postData.payment={type:l.deal.payment.type};var t=l.deal.entities;return e&&(t=[e]),l.postData.entities=[],t.forEach(function(e){var t={sku:e.sku,qty:e.qty-e.returnedQty};t.qty>0&&l.postData.entities.push(t)}),a(),n.open({template:"checkoutReturnDialogId",controller:"checkoutReturnDialogController"}).closePromise}function s(){return l.postData.status="closed",e.returns.create({id:l.deal.id},l.postData).$promise}var l=this;this.openReturn=r,this.checkout=i,this.doReturn=s,this.count=a}angular.module("app.sales").service("dealService",e).service("returnService",t),e.$inject=["Deal","Sku","ngDialog","$rootScope"],t.$inject=["Deal","Sku","ngDialog","$rootScope"]}(),function(){"use strict";function e(e,t,n){function o(){e.dealService=t,t.deal||t.openDeal(),r.checkins=n.find({filter:{where:{merchantId:e.user.shopId},include:[{member:"wxuser"}],limit:10,order:"created DESC"}}),r.templateUrl="checkinsTemplate.html"}var r=this;o()}function t(e,t,n,o){function r(){e.dealService=n}r(),e.confirm=function(){n.pay().then(function(r){e.submiting=!1,t.close(),n.openDeal(),o.pop("success","成功","完成交易")},function(t){e.submiting=!1,o.pop("error","失败","交易未完成，请重试！")}),e.submiting=!0}}function n(e,t,n,o){function r(){a.keyword="",a.tableParams=new n({count:10},{getData:function(e,n){var r={where:{status:{ne:"deleted"}},include:[]};if(""!=a.keyword){var i={regex:keyword};r.where.or=[{"entities.sku.item.name":i}],n.page(1)}o.getData(e,n,t,r)}})}var a=this;r()}function o(e,t,n,o,r){function a(){i.returnSku={},i.deal=t.findOne({filter:{where:{id:e.$state.params.dealId},include:["returns","bonuses"]}}),i.deal.$promise.then(function(e){i.deal.entities.forEach(function(e){e.returnedQty=0,i.returnSku[e.sku.id]=e}),i.deal.returns&&i.deal.returns.length>0?(i.deal.returns.forEach(function(e){e.entities.forEach(function(e){i.returnSku[e.sku.id].returnedQty+=e.qty})}),i["return"]=i.deal.returns[0]):i["return"]={entities:[]},r.openReturn(i.deal)})}var i=this;a(),i.goReturn=function(e){r.checkout(e).then(function(e){a()})}}function r(e,t,n,o){function r(){e.returnService=n}r(),e.confirm=function(){n.doReturn().then(function(n){e.submiting=!1,t.close(),o.pop("success","成功","完成退款退货")},function(t){e.submiting=!1,o.pop("error","失败","退款退货未完成，请重试！")}),e.submiting=!0}}angular.module("app.sales").controller("SellController",e).controller("checkoutDialogController",t).controller("DealsController",n).controller("DealController",o).controller("checkoutReturnDialogController",r),e.$inject=["$scope","dealService","Checkin"],t.$inject=["$scope","ngDialog","dealService","toaster"],n.$inject=["$scope","Deal","ngTableParams","ngTableLBService"],o.$inject=["$scope","Deal","ngTableParams","ngTableLBService","returnService"],r.$inject=["$scope","ngDialog","returnService","toaster"]}(),function(){"use strict";function e(e){return function(t){return e.payType[t]}}function t(){var e={closed:"已完成"};return function(t){return e[t]}}angular.module("app.sales").filter("deal_status",t).filter("payment_type",e),e.$inject=["dealService"]}(),function(){"use strict";function e(e){function t(e){return"app/views/"+e}function n(){var t=arguments;return{deps:["$ocLazyLoad","$q",function(n,o){function r(e){return"function"==typeof e?i.then(e):i.then(function(){var t=a(e);return t?n.load(t):$.error("Route resolve: Bad resource name ["+e+"]")})}function a(t){if(e.modules)for(var n in e.modules)if(e.modules[n].name&&e.modules[n].name===t)return e.modules[n];return e.scripts&&e.scripts[t]}for(var i=o.when(1),s=0,l=t.length;l>s;s++)i=r(t[s]);return i}]}}return{basepath:t,resolveFor:n,$get:function(){return{basepath:t,resolveFor:n}}}}angular.module("app.routes").provider("RouteHelpers",e),e.$inject=["APP_REQUIRES"]}(),function(){"use strict";function e(e,t,n,o){t.html5Mode(!1),n.otherwise("/app/dashboard"),e.state("app",{url:"/app","abstract":!0,templateUrl:o.basepath("app.html"),resolve:o.resolveFor("fastclick","modernizr","icons","screenfull","animo","sparklines","slimscroll","classyloader","toaster","whirl","moment")}).state("app.dashboard",{url:"/dashboard",title:"Dashboard",templateUrl:o.basepath("dashboard.html"),controller:"DashboardController as dash",resolve:o.resolveFor("flot-chart","flot-chart-plugins","weather-icons")}).state("app.sell",{url:"/sell",title:"sell",templateUrl:o.basepath("sell.html"),controller:"SellController as sell",resolve:o.resolveFor("ngTable","ngDialog","oitozero.ngSweetAlert","loaders.css","spinkit")}).state("app.members",{url:"/members",title:"Members",templateUrl:o.basepath("members.html"),controller:"MembersController as members",resolve:o.resolveFor("ngTable","ngTableExport","ngDialog","oitozero.ngSweetAlert","spinkit")}).state("app.member",{url:"/members/:memberId",title:"Member Detail",templateUrl:o.basepath("member.html"),controller:"MemberController as member",resolve:o.resolveFor("ngTable","ngDialog","oitozero.ngSweetAlert","spinkit")}).state("app.deals",{url:"/deals",title:"Deals",templateUrl:o.basepath("deals.html"),resolve:o.resolveFor("ngTable","ngDialog","oitozero.ngSweetAlert","spinkit")}).state("app.deal",{url:"/deals/:dealId",title:"Deal",templateUrl:o.basepath("deal.html"),controller:"DealController as dc",resolve:o.resolveFor("ngTable","ngDialog","oitozero.ngSweetAlert","spinkit")}).state("app.cost",{url:"/cost",title:"Cost",templateUrl:o.basepath("cost.html"),resolve:o.resolveFor("ngTable","ngTableExport","ngDialog","oitozero.ngSweetAlert","spinkit")}).state("app.item",{url:"/item",title:"Item",templateUrl:o.basepath("item.html"),resolve:o.resolveFor("ngTable","ngTableExport","ngDialog","oitozero.ngSweetAlert","spinkit")}).state("app.item-add",{url:"/item-add",title:"Item Add",templateUrl:o.basepath("item-add.html"),resolve:o.resolveFor("parsley")}).state("app.card",{url:"/card",title:"Card",templateUrl:o.basepath("card.html"),resolve:o.resolveFor("ngTable","ngTableExport","ngDialog","oitozero.ngSweetAlert","spinkit")}).state("app.campaign",{url:"/campaign",title:"Campaign",templateUrl:o.basepath("campaign.html"),resolve:o.resolveFor("ngTable","ngTableExport","ngDialog","oitozero.ngSweetAlert","spinkit")}).state("app.myshop",{url:"/myshop",title:"MyShop",templateUrl:o.basepath("myshop.html"),resolve:o.resolveFor("xeditable")}).state("app.setting",{url:"/setting",title:"Setting",templateUrl:o.basepath("setting.html"),resolve:o.resolveFor("ngTable","ngTableExport","ngDialog","oitozero.ngSweetAlert","spinkit")}).state("page",{url:"/page",templateUrl:"app/pages/page.html",resolve:o.resolveFor("modernizr","icons"),controller:["$rootScope",function(e){e.app.layout.isBoxed=!1}]}).state("page.login",{url:"/login",title:"Login",templateUrl:"app/pages/login.html"}).state("page.register",{url:"/register",title:"Register",templateUrl:"app/pages/register.html"}).state("page.recover",{url:"/recover",title:"Recover",templateUrl:"app/pages/recover.html"}).state("page.404",{url:"/404",title:"Not Found",templateUrl:"app/pages/404.html"})}angular.module("app.routes").config(e),e.$inject=["$stateProvider","$locationProvider","$urlRouterProvider","RouteHelpersProvider"]}(),function(){"use strict";function e(e,t,n,o,r,a){function i(){s.wxgh=n.prototype$__get__wxgh({id:e.user.merchantId,refresh:!0})}var s=this;s.industry={"IT科技":{"互联网/电子商务":"1","IT软件与服务":"2","IT硬件与设备":"3","电子技术":"4","通信与运营商":"5","网络游戏":"6"},"金融业":{"银行":"7","基金|理财|信托":"8","保险":"9"},"餐饮":{"餐饮":"10"},"酒店旅游":{"酒店":"11","旅游":"12"},"运输与仓储":{"快递":"13","物流":"14","仓储":"15"},"教育":{"培训":"16","院校":"17"},"政府与公共事业":{"学术科研":"18","交警":"19","博物馆":"20","公共事业|非盈利机构":"21"},"医药护理":{"医药医疗":"22","护理美容":"23","保健与卫生":"24"},"交通工具":{"汽车相关":"25","摩托车相关":"26","火车相关":"27","飞机相关":"28"},"房地产":{"建筑":"29","物业":"30"},"消费品":{"消费品":"31"},"商业服务":{"法律":"32","会展":"33","中介服务":"34","认证":"35","审计":"36"},"文体娱乐":{"传媒":"37","体育":"38","娱乐休闲":"39"},"印刷":{"印刷":"40"},"其它":{"其它":"41"}},i(),s.update=function(t){var r=n,i=e.user.merchant;t&&(i=e.user.shop,r=o),r.update({where:{id:i.id}},i,function(e,t){a.pop("success","成功","设置已经保存")},function(e){a.pop("error","失败","设置未成功，请重试！")})},s.addMemberLevel=function(){var t=e.user.merchant.memberLevels||[],n=t.length>0&&t[t.length-1]||{upper:-1};t.push({lower:n.upper+1,upper:n.upper+1e3,discount:100,name:"VIP"}),e.user.merchant.memberLevels||(e.user.merchant.memberLevels=t)},s.updaeteMemberLevels=function(){e.user.merchant.memberLevels.forEach(function(t){r.update({where:{merchantId:e.user.merchant.id,totalBonus:{gte:t.lower,lte:t.upper}}},{discount:t.discount,level:t.name},function(e,t){a.pop("success","成功","更新全体会员等级完成")},function(e){a.pop("error","失败","更新全体会员等级未成功，请重试！")})})},s.updateWxgh=function(){s.update(),n.updateWxgh({id:s.wxgh.id,appid:s.wxgh.appid,appsecret:s.wxgh.appsecret,industry:e.user.merchant.industry},function(e){a.pop("success","成功","微信公众号设置已经保存")},function(e){a.pop("error","失败","设置未成功，请重试！")})}}angular.module("app.settings").controller("SettingController",e),e.$inject=["$scope","$rootScope","Merchant","Shop","Member","toaster"]}(),function(){"use strict";function e(e,t){e.app={name:"泛卡汇WebPOS",description:"在线收银系统",year:(new Date).getFullYear(),layout:{isFixed:!0,isCollapsed:!1,isBoxed:!1,isRTL:!1,horizontal:!1,isFloat:!1,asideHover:!1,theme:"app/css/theme-e.css"},useFullLayout:!1,hiddenFooter:!1,offsidebarOpen:!1,asideToggled:!1,viewAnimation:"ng-fadeInUp"},e.app.layout.horizontal="app-h"===e.$stateParams.layout,angular.isDefined(t.layout)?e.app.layout=t.layout:t.layout=e.app.layout,e.$watch("app.layout",function(){t.layout=e.app.layout},!0),e.$watch("app.layout.isCollapsed",function(t){t===!1&&e.$broadcast("closeSidebarMenu")})}angular.module("app.settings").run(e),e.$inject=["$rootScope","$localStorage"]}(),function(){"use strict";function e(e,t,n,o,r){function a(){function a(e){t.menuItems=e}function i(e){if(e){if(e.sref&&"#"!==e.sref)return n.is(e.sref)||n.includes(e.sref);var t=!1;return angular.forEach(e.submenu,function(e){i(e)&&(t=!0)}),t}}function s(e){e+="";for(var t in c)(0>e||e.indexOf(t)<0)&&(c[t]=!0)}function l(e){return"string"==typeof e&&!(e.indexOf("-")<0)}var c=[];e.$watch("app.layout.asideHover",function(e,t){t===!1&&e===!0&&s(-1)}),o.getMenu(a),t.getMenuItemPropClasses=function(e){return(e.heading?"nav-heading":"")+(i(e)?" active":"")},t.addCollapse=function(t,n){c[t]=e.app.layout.asideHover?!0:!i(n)},t.isCollapse=function(e){return c[e]},t.toggleCollapse=function(n,o){return r.isSidebarCollapsed()||e.app.layout.asideHover?!0:(angular.isDefined(c[n])?t.lastEventFromChild||(c[n]=!c[n],s(n)):o&&s(-1),t.lastEventFromChild=l(n),!0)}}a()}angular.module("app.sidebar").controller("SidebarController",e),e.$inject=["$rootScope","$scope","$state","SidebarLoader","Utils"]}(),function(){"use strict";function e(e,t,n,o){function r(n,r,i){function u(e){e===!0?t(function(){h.on(v,function(e){$(e.target).parents(".aside").length||d()})}):h.off(v)}function d(){e.app.asideToggled=!1,n.$$phase||n.$apply()}var p=e.$state.current.name,m=r,f=o.isTouch()?"click":"mouseenter",g=$();if(m.on(f,".nav > li",function(){(o.isSidebarCollapsed()||e.app.layout.asideHover)&&(g.trigger("mouseleave"),g=s($(this),m),a())}),n.$on("closeSidebarMenu",function(){l()}),c.on("resize",function(){o.isMobile()||d()}),e.$on("$stateChangeStart",function(t,n){p=n.name,d(),e.$broadcast("closeSidebarMenu")}),angular.isDefined(i.sidebarAnyclickClose)){var h=$(".wrapper"),v="click.sidebar";e.$watch("app.asideToggled",u)}}function a(){var e=$("<div/>",{"class":"dropdown-backdrop"});e.insertAfter(".aside-inner").on("click mouseenter",function(){l()})}function i(e){e.siblings("li").removeClass("open").end().toggleClass("open")}function s(t,n){l();var o=t.children("ul");if(!o.length)return $();if(t.hasClass("open"))return i(t),$();var r=$(".aside"),a=$(".aside-inner"),s=parseInt(a.css("padding-top"),0)+parseInt(r.css("padding-top"),0),u=o.clone().appendTo(r);i(t);var d=t.position().top+s-n.scrollTop(),p=c.height();return u.addClass("nav-floating").css({position:e.app.layout.isFixed?"fixed":"absolute",top:d,bottom:u.outerHeight(!0)+d>p?0:"auto"}),u.on("mouseleave",function(){i(t),u.remove()}),u}function l(){$(".dropdown-backdrop").remove(),$(".sidebar-subnav.nav-floating").remove(),$(".sidebar li.open").removeClass("open")}var c=angular.element(n),u={link:r,restrict:"EA",template:'<nav class="sidebar" ng-transclude></nav>',transclude:!0,replace:!0};return u}angular.module("app.sidebar").directive("sidebar",e),e.$inject=["$rootScope","$timeout","$window","Utils"]}(),function(){"use strict";function e(e){function t(t,n){var o="server/sidebar-menu.json",r=o+"?v="+(new Date).getTime();n=n||function(){alert("Failure loading menu")},e.get(r).success(t).error(n)}this.getMenu=t}angular.module("app.sidebar").service("SidebarLoader",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){function t(){e.user=e.user||{name:"李明",job:"老板",picture:"app/img/dummy.png"},e.toggleUserBlock=function(){e.$broadcast("toggleUserBlock")},e.userBlockVisible=!0,e.$on("toggleUserBlock",function(){e.userBlockVisible=!e.userBlockVisible})}t()}angular.module("app.sidebar").controller("UserBlockController",e),e.$inject=["$rootScope"]}(),function(){"use strict";function e(){function e(e,n,o){function r(e,n){var o=(n.page()-1)*n.count(),r=n.page()*n.count(),a=t.cache.result.slice(o,r);n.total(t.cache.total),e.resolve(a)}t.cache?r(e,n):o&&o.get(function(o){t.cache=o,r(e,n)})}var t=this;this.cache=null,this.getData=e}angular.module("app.tables").service("ngTableDataService",e)}(),function(){"use strict";function e(){function e(e,t,n,o){o.limit=t.count(),o.skip=(t.page()-1)*o.limit,n.count({where:o.where},function(r){t.total(r.count),n.find({filter:o},e.resolve)})}this.getData=e}angular.module("app.tables").service("ngTableLBService",e)}(),function(){"use strict";function e(e){e.useStaticFilesLoader({prefix:"app/i18n/",suffix:".json"}),e.preferredLanguage("zh_CN"),e.useLocalStorage(),e.usePostCompiling(!0),e.useSanitizeValueStrategy("sanitizeParameters")}angular.module("app.translate").config(e),e.$inject=["$translateProvider"]}(),function(){"use strict";function e(e,t){e.language={listIsOpen:!1,available:{zh_CN:"中文简体",en:"English",es_AR:"Español"},init:function(){var n=t.proposedLanguage()||t.use(),o=t.preferredLanguage();e.language.selected=e.language.available[n||o]},set:function(n){t.use(n),e.language.selected=e.language.available[n],e.language.listIsOpen=!e.language.listIsOpen}},e.language.init()}angular.module("app.translate").run(e),e.$inject=["$rootScope","$translate"]}(),function(){"use strict";function e(e){function t(t,n,o){t.$watch(function(){return t.$eval(o.animateEnabled,t)},function(t){e.enabled(!!t,n)})}var n={link:t,restrict:"A"};return n}angular.module("app.utils").directive("animateEnabled",e),e.$inject=["$animate"]}(),function(){"use strict";function e(e){return e.jQBrowser}angular.module("app.utils").service("Browser",e),e.$inject=["$window"]}(),function(){"use strict";function e(e,t){function n(n,o){o.on("click",function(o){o.preventDefault(),n.resetKey?(delete t[n.resetKey],e.go(e.current,{},{reload:!0})):$.error("No storage key specified for reset.")})}var o={link:n,restrict:"A",scope:{resetKey:"@"}};return o}angular.module("app.utils").directive("resetKey",e),e.$inject=["$state","$localStorage"]}(),function(){"use strict";function e(e){return{require:"ngModel",restrict:"A",link:function(e,t,n,o){o.$parsers.push(function(e){return 100*e}),o.$formatters.push(function(e){return e/100})}}}function t(e){return{require:"ngModel",restrict:"A",link:function(e,t,n,o){o.$parsers.push(function(e){return e/100}),o.$formatters.push(function(e){return 100*e})}}}angular.module("app.utils").directive("currency",e).directive("bonus",t),e.$inject=["$window"],t.$inject=["$window"]}(),function(){"use strict";function e(e){function t(t,n){e.msie?n.addClass("hide"):n.on("click",function(e){e.preventDefault(),screenfull.enabled?(screenfull.toggle(),screenfull.isFullscreen?$(this).children("em").removeClass("fa-expand").addClass("fa-compress"):$(this).children("em").removeClass("fa-compress").addClass("fa-expand")):$.error("Fullscreen not enabled")})}var n={link:t,restrict:"A"};return n}angular.module("app.utils").directive("toggleFullscreen",e),e.$inject=["Browser"]}(),function(){"use strict";function e(){function e(e,n,o){n.on("click",function(e){n.is("a")&&e.preventDefault();var r,a=o.loadCss;a?(r=t(a),r||$.error("Error creating stylesheet link element.")):$.error("No stylesheet location defined.")})}function t(e){var t="autoloaded-stylesheet",n=$("#"+t).attr("id",t+"-old");return $("head").append($("<link/>").attr({id:t,rel:"stylesheet",href:e})),n.length&&n.remove(),$("#"+t)}var n={link:e,restrict:"A"};return n}angular.module("app.utils").directive("loadCss",e)}(),function(){"use strict";function e(e,t){function n(n,o,r){function a(){var t=e(new Date,i);o.text(t)}var i=r.format;a();var s=t(a,1e3);n.$on("$destroy",function(){t.cancel(s)})}var o={link:n,restrict:"EA"};return o}angular.module("app.utils").directive("now",e),e.$inject=["dateFilter","$interval"]}(),function(){"use strict";function e(){function e(e,t){t.on("change",function(){var e=$(this),t=e.index()+1,n=e.find('input[type="checkbox"]'),o=e.parents("table");o.find("tbody > tr > td:nth-child("+t+') input[type="checkbox"]').prop("checked",n[0].checked)})}var t={link:e,restrict:"A"};return t}angular.module("app.utils").directive("checkAll",e)}(),function(){"use strict";function e(e,t){function n(n,o){o.on("click",function(){t(function(){e.dispatchEvent(new Event("resize"))})})}var o={link:n,restrict:"A"};return o}angular.module("app.utils").directive("triggerResize",e),e.$inject=["$window","$timeout"]}(),function(){"use strict";function e(e,t){var n=angular.element("html"),o=angular.element(e),r=angular.element("body");return{support:{transition:function(){var e=function(){var e,t=document.body||document.documentElement,n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"
};for(e in n)if(void 0!==t.style[e])return n[e]}();return e&&{end:e}}(),animation:function(){var e=function(){var e,t=document.body||document.documentElement,n={WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd oanimationend",animation:"animationend"};for(e in n)if(void 0!==t.style[e])return n[e]}();return e&&{end:e}}(),requestAnimationFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},touch:"ontouchstart"in window&&navigator.userAgent.toLowerCase().match(/mobile|tablet/)||window.DocumentTouch&&document instanceof window.DocumentTouch||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0||!1,mutationobserver:window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||null},isInView:function(e,t){var n=$(e);if(!n.is(":visible"))return!1;var r=o.scrollLeft(),a=o.scrollTop(),i=n.offset(),s=i.left,l=i.top;return t=$.extend({topoffset:0,leftoffset:0},t),l+n.height()>=a&&l-t.topoffset<=a+o.height()&&s+n.width()>=r&&s-t.leftoffset<=r+o.width()?!0:!1},langdirection:"rtl"===n.attr("dir")?"right":"left",isTouch:function(){return n.hasClass("touch")},isSidebarCollapsed:function(){return r.hasClass("aside-collapsed")},isSidebarToggled:function(){return r.hasClass("aside-toggled")},isMobile:function(){return o.width()<t.tablet}}}angular.module("app.utils").service("Utils",e),e.$inject=["$window","APP_MEDIAQUERY"]}(),function(){"use strict";angular.module("custom",["angle","app.core","app.sidebar"])}(),function(){"use strict";function e(e){function t(){e.log("I'm a line from custom.js")}t()}angular.module("custom").controller("Controller",e),e.$inject=["$log"]}();