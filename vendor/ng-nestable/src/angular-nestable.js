!function(e,t,n,a){n.module("ng-nestable",[]).provider("$nestable",function(){var e="$item",t={};this.$get=function(){return{modelName:e,defaultOptions:t}},this.modelName=function(t){e=t},this.defaultOptions=function(e){t=e}}).directive("ngNestable",["$compile","$nestable",function(e,t){function a(e,t){var n=$('<div class="dd"></div>'),a=$('<ol class="dd-list"></ol>').appendTo(n);return e.forEach(function i(e){var n=Array.prototype.slice.call(arguments).slice(-1)[0];n instanceof $||(n=a);var l=$('<li class="dd-item"></li>'),r=$('<div ng-nestable-item class="dd-handle"></div>');if(r.append(t).appendTo(l),n.append(l),l.data("item",e.item),o(e.children)&&e.children.length>0){var c=$('<ol class="dd-list"></ol>').appendTo(l);e.children.forEach(function(e){i.apply(this,Array.prototype.slice.call(arguments).concat([c]))})}}),n}function o(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e,t){var n=t.$formatters,a=n.length;for(t.$modelValue=e;a--;)e=n[a](e);return e}return{restrict:"A",require:"ngModel",compile:function(n){var o=n.html();return n.empty(),function(n,l,r,c){var d=$.extend({},t.defaultOptions,n.$eval(r.ngNestable));n.$watchCollection(function(){return c.$modelValue},function(t){if(t){t=i(t,c);var r=a(t,o);l.empty().append(r),e(r)(n),r.nestable(d),r.on("change",function(){c.$setViewValue(r.nestable("serialize")),n&&n.$root&&n.$root.$$phase||n.$apply()})}})}},controller:n.noop}}]).directive("ngNestableItem",["$nestable",function(e){return{scope:!0,require:"^ngNestable",link:function(t,n){t[e.modelName]=n.parent().data("item")}}}])}(window,document,window.angular);